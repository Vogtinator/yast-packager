<HTML>
<HEAD>
<TITLE>targetpkg agent</TITLE>
</HEAD>
<BODY>
<H1>targetpkg agent</H1>
<HR>
<H2>Purpose</H2>
Handles package informations about packages which are installed on the<br>
system ( target system ). <BR>
Installation and deletion of packages should be available in a second step.
<P>
If the path cannot be recognized, <TT>void</TT> is returned.
<P>
<H2>Implementation</H2>
Handles all RPM calls.<br>
<P>
<H2>Execute() Commands</H2>
<H3>.targetpkg.backup</H3>
Backup a package before it will be updated.<BR>
<BR>
Argument: string packageName<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute (.targetpkg.backup, "aaa_base" )</TT>
<P>
<H3>.targetpkg.touchDirectories</H3>
Touch all files and directories of a package.<BR>
<BR>
Argument: string packageName<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute(.targetpkg.touchDirectories, "aaa_base" )</TT><BR>
<P>
<H3>.targetpkg.updateDb</H3>
Updating package database.<BR>
<BR>
Argument: EMTPY string<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute(.targetpkg.updateDb, "" )</TT><BR>
<P>
<H3>.targetpkg.removePackageLinks</H3>
Remove all links ( like links to live-CD ) of a package.<BR>
<BR>
Argument: string packageName<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute(.targetpkg.removePackageLinks, "aaa_base" )</TT><BR>
<P>
<H3>.targetpkg.rebuildDb</H3>
Starting rebuild of the package DB.<BR>
<BR>
Argument: EMPTY string<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute (.targetpkg.rebuildDb, "")</TT><BR>
<P>
<H3>.targetpkg.checkSourcePackage</H3>
Checking the source rpm &lt;rpmpath&gt;.rpm with rpm --chcksig and
the version number. This call should be moved to the sourcepkg agent
when it exists.<BR>
<BR>
Argument: string packagename, [ string version ]<BR>
<BR>
Returns: true/false<BR>
<BR>
Usage: <TT>Execute (.targetpkg.checkSourcePackage, "/tmp/aaa_base.rmp")</TT><BR>
<P>
<H2>Read() commands</H2>
<P>
<H3>.targetpkg.dbPath</H3>
Evaluate the current path of the package DB<BR>
<BR>
Argument: none<BR>
<BR>
Returns: current DB path<BR>
<BR>
Usage: <TT>Read(.targetpkg.dbPath)</TT><BR>
<P>
<H3>.targetpkg.installedKernel</H3>
Evaluate current installed kernel.<BR>
<BR>
Argument: none<BR>
<BR>
Returns: string kernelname<BR>
<BR>
Usage: <TT>Read (.targetpkg.installedKernel )</TT><BR>
<P>
<H3>.targetpkg.rebuildDbProgress</H3>
Evaluate the status of the RPM-rebuild and returns the range from 0 to 100 or -1 if an error occured.<BR>
<BR>
Argument: none<BR>
<BR>
Returns:   0-100 or -1 if an error occured<BR>
<BR>
Usage: <TT>Read (.targetpkg.rebuildDbProgress )</TT><BR>
<P>
<H3>.targetpkg.info.[&lt;subtrees&gt;]</H3>
Returns information about an installed package.<BR>
<BR>
Argument: string package name<BR>
<BR>
Return value without subtrees:  $[&lt;packageName&gt;:[&lt;version&gt;,&lt;build time&gt;,&lt;install time&gt;] ...]  <BR>
<BR>
Subtrees: .version; .release, .buildTime .installTime<BR>
Return value: string<BR>
<BR>
Subtree: .fileList<BR>
Return value: <TT>[YCPString,...]</TT>, or <TT>YCPVoid</TT>, if the package is not installed.<BR>
<BR>
Usage: <TT>Read (.targetpkg.info.version, "aaa_base" )</TT><BR>
<P>
<H3>.targetpkg.backupPath</H3>
Return the backup path of updated packages.<BR>
<BR>
Argument: none<BR>
<BR>
Returns:   string<BR>
<BR>
Usage: <TT>Read (.targetpkg.backupPath )</TT><BR>
<P>
<H3>.targetpkg.installed;</H3>
Check if the package is installed.<BR>
<BR>
Argument: string package Name<BR>
<BR>
Returns:   true/false<BR>
<BR>
Usage: <TT>Read (.targetpkg.installed, "aaa_base")</TT><BR>
<P>
<H2>Write() commands</H2>
<P>
<H3>.targetpkg.backupPath</H3>
Setting the backup path of updated packages.<BR>
<BR>
Argument: string path<BR>
<BR>
Returns:   true or false<BR>
<BR>
Usage: <TT>Write (.targetpkg.backupPath,"/var/adm/backup" )</TT><BR>
<P>
<H3>.targetpkg.dbTargetPath</H3>
Setting the current targetroot path of the package DB. While starting the agent "/" <BR>
will be taken as default.<BR>
<BR>
Argument: string path<BR>
<BR>
Returns:   true or false<BR>
<BR>
Usage: <TT>Write (.targetpkg.dbTargetPath,"/mnt" )</TT><BR>
<P>
</BODY>
</HTML>
